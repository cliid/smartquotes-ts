{"/home/cliid/workspace/personal/projects/smartquotes-ts/src/index.ts":{"path":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":82}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":53}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":34}},"8":{"start":{"line":11,"column":23},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":46}},"10":{"start":{"line":13,"column":17},"end":{"line":13,"column":53}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":34}},"12":{"start":{"line":17,"column":4},"end":{"line":26,"column":5}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":81}},"14":{"start":{"line":18,"column":42},"end":{"line":18,"column":79}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":27}},"16":{"start":{"line":21,"column":9},"end":{"line":26,"column":5}},"17":{"start":{"line":22,"column":8},"end":{"line":22,"column":46}},"18":{"start":{"line":24,"column":9},"end":{"line":26,"column":5}},"19":{"start":{"line":25,"column":8},"end":{"line":25,"column":47}},"20":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"21":{"start":{"line":29,"column":0},"end":{"line":29,"column":38}},"22":{"start":{"line":30,"column":0},"end":{"line":30,"column":50}},"23":{"start":{"line":31,"column":0},"end":{"line":31,"column":38}},"24":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"smartquotes","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":20}},"loc":{"start":{"line":16,"column":30},"end":{"line":27,"column":1}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":36},"end":{"line":18,"column":37}},"loc":{"start":{"line":18,"column":42},"end":{"line":18,"column":79}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":17,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":26,"column":5}},{"start":{"line":17,"column":4},"end":{"line":26,"column":5}}],"line":17},"4":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":73}},"type":"binary-expr","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":39}},{"start":{"line":17,"column":43},"end":{"line":17,"column":73}}],"line":17},"5":{"loc":{"start":{"line":21,"column":9},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":9},"end":{"line":26,"column":5}},{"start":{"line":21,"column":9},"end":{"line":26,"column":5}}],"line":21},"6":{"loc":{"start":{"line":24,"column":9},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":9},"end":{"line":26,"column":5}},{"start":{"line":24,"column":9},"end":{"line":26,"column":5}}],"line":24}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":3,"13":1,"14":1,"15":1,"16":2,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"f":{"0":4,"1":3,"2":1},"b":{"0":[1,1,1],"1":[4,0],"2":[4,4],"3":[1,2],"4":[3,1],"5":[1,1],"6":[1,0]},"inputSourceMap":{"version":3,"file":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/index.ts","sources":["/home/cliid/workspace/personal/projects/smartquotes-ts/src/index.ts"],"names":[],"mappings":";;;;;;AAAA,wDAAgC;AAuBvB,kBAvBF,iBAAO,CAuBE;AAtBhB,sDAA8B;AAsBZ,iBAtBX,gBAAM,CAsBW;AArBxB,kEAA0C;AAqBhB,uBArBnB,sBAAY,CAqBmB;AApBtC,sDAA8B;AAoBU,iBApBjC,gBAAM,CAoBiC;AAlB9C,uEAAuE;AACvE,SAAS,WAAW,CAAC,OAAuD;IAC1E,IAAI,OAAO,QAAQ,KAAK,WAAW,IAAI,OAAO,OAAO,KAAK,WAAW,EAAE;QACrE,gBAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAA,iBAAO,EAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QAChD,OAAO,WAAW,CAAC;KACpB;SAAM,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;QACtC,OAAO,IAAA,gBAAM,EAAC,OAAO,CAAC,CAAC;KACxB;SAAM,IAAI,OAAO,EAAE;QAClB,OAAO,IAAA,iBAAO,EAAC,OAAO,CAAC,CAAC;KACzB;AACH,CAAC;AAED,WAAW,CAAC,OAAO,GAAG,iBAAO,CAAC;AAC9B,WAAW,CAAC,MAAM,GAAG,gBAAM,CAAC;AAC5B,WAAW,CAAC,YAAY,GAAG,sBAAY,CAAC;AACxC,WAAW,CAAC,MAAM,GAAG,gBAAM,CAAC;AAE5B,kBAAe,WAAW,CAAC","sourcesContent":["import element from \"./element\";\nimport listen from \"./listen\";\nimport replacements from \"./replacements\";\nimport string from \"./string\";\n\n// The smartquotes function should just delegate to the other functions\nfunction smartquotes(context?: string | Node | Document | HTMLElement | null) {\n  if (typeof document !== \"undefined\" && typeof context === \"undefined\") {\n    listen.runOnReady(() => element(document.body));\n    return smartquotes;\n  } else if (typeof context === \"string\") {\n    return string(context);\n  } else if (context) {\n    return element(context);\n  }\n}\n\nsmartquotes.element = element;\nsmartquotes.listen = listen;\nsmartquotes.replacements = replacements;\nsmartquotes.string = string;\n\nexport default smartquotes;\nexport { element, listen, replacements, string };\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ced4fdd901e658e2e77bf08d2abed7dad891eb7","contentHash":"29613b897b544a0c7141ec61918871ef0e384fa8a6b054cef4b6550c485923b5"},"/home/cliid/workspace/personal/projects/smartquotes-ts/src/element.ts":{"path":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/element.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":53}},"4":{"start":{"line":8,"column":4},"end":{"line":8,"column":24}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":16}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":26}},"7":{"start":{"line":12,"column":15},"end":{"line":16,"column":1}},"8":{"start":{"line":13,"column":4},"end":{"line":14,"column":35}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":35}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":17}},"11":{"start":{"line":17,"column":19},"end":{"line":21,"column":1}},"12":{"start":{"line":18,"column":4},"end":{"line":19,"column":41}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":41}},"14":{"start":{"line":20,"column":4},"end":{"line":20,"column":17}},"15":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":15}},"17":{"start":{"line":26,"column":15},"end":{"line":26,"column":17}},"18":{"start":{"line":27,"column":23},"end":{"line":27,"column":62}},"19":{"start":{"line":28,"column":22},"end":{"line":28,"column":24}},"20":{"start":{"line":30,"column":4},"end":{"line":41,"column":5}},"21":{"start":{"line":30,"column":17},"end":{"line":30,"column":18}},"22":{"start":{"line":31,"column":21},"end":{"line":31,"column":34}},"23":{"start":{"line":32,"column":8},"end":{"line":40,"column":9}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":64}},"25":{"start":{"line":34,"column":12},"end":{"line":34,"column":70}},"26":{"start":{"line":36,"column":13},"end":{"line":40,"column":9}},"27":{"start":{"line":39,"column":12},"end":{"line":39,"column":40}},"28":{"start":{"line":42,"column":4},"end":{"line":42,"column":63}},"29":{"start":{"line":43,"column":4},"end":{"line":51,"column":5}},"30":{"start":{"line":43,"column":17},"end":{"line":43,"column":18}},"31":{"start":{"line":44,"column":25},"end":{"line":44,"column":37}},"32":{"start":{"line":45,"column":8},"end":{"line":50,"column":9}},"33":{"start":{"line":46,"column":12},"end":{"line":46,"column":102}},"34":{"start":{"line":48,"column":13},"end":{"line":50,"column":9}},"35":{"start":{"line":49,"column":12},"end":{"line":49,"column":88}},"36":{"start":{"line":52,"column":4},"end":{"line":52,"column":16}},"37":{"start":{"line":55,"column":4},"end":{"line":57,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"element","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":16}},"loc":{"start":{"line":7,"column":23},"end":{"line":10,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":15},"end":{"line":12,"column":16}},"loc":{"start":{"line":12,"column":25},"end":{"line":16,"column":1}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":19},"end":{"line":17,"column":20}},"loc":{"start":{"line":17,"column":29},"end":{"line":21,"column":1}},"line":17},"4":{"name":"handleElement","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":22}},"loc":{"start":{"line":22,"column":27},"end":{"line":53,"column":1}},"line":22},"5":{"name":"substring","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":18}},"loc":{"start":{"line":54,"column":42},"end":{"line":58,"column":1}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":13,"column":4},"end":{"line":14,"column":35}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":14,"column":35}},{"start":{"line":13,"column":4},"end":{"line":14,"column":35}}],"line":13},"4":{"loc":{"start":{"line":18,"column":4},"end":{"line":19,"column":41}},"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":19,"column":41}},{"start":{"line":18,"column":4},"end":{"line":19,"column":41}}],"line":18},"5":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":51}},"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},{"start":{"line":18,"column":33},"end":{"line":18,"column":51}}],"line":18},"6":{"loc":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},{"start":{"line":23,"column":4},"end":{"line":25,"column":5}}],"line":23},"7":{"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":62}},"type":"cond-expr","locations":[{"start":{"line":27,"column":44},"end":{"line":27,"column":57}},{"start":{"line":27,"column":60},"end":{"line":27,"column":62}}],"line":27},"8":{"loc":{"start":{"line":32,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":40,"column":9}},{"start":{"line":32,"column":8},"end":{"line":40,"column":9}}],"line":32},"9":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":44}},"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":28}},{"start":{"line":32,"column":32},"end":{"line":32,"column":44}}],"line":32},"10":{"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":69}},"type":"cond-expr","locations":[{"start":{"line":34,"column":42},"end":{"line":34,"column":56}},{"start":{"line":34,"column":59},"end":{"line":34,"column":69}}],"line":34},"11":{"loc":{"start":{"line":36,"column":13},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":13},"end":{"line":40,"column":9}},{"start":{"line":36,"column":13},"end":{"line":40,"column":9}}],"line":36},"12":{"loc":{"start":{"line":36,"column":17},"end":{"line":38,"column":34}},"type":"binary-expr","locations":[{"start":{"line":36,"column":17},"end":{"line":36,"column":37}},{"start":{"line":37,"column":12},"end":{"line":37,"column":27}},{"start":{"line":38,"column":12},"end":{"line":38,"column":34}}],"line":36},"13":{"loc":{"start":{"line":45,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":50,"column":9}},{"start":{"line":45,"column":8},"end":{"line":50,"column":9}}],"line":45},"14":{"loc":{"start":{"line":46,"column":54},"end":{"line":46,"column":83}},"type":"binary-expr","locations":[{"start":{"line":46,"column":54},"end":{"line":46,"column":77}},{"start":{"line":46,"column":81},"end":{"line":46,"column":83}}],"line":46},"15":{"loc":{"start":{"line":48,"column":13},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":13},"end":{"line":50,"column":9}},{"start":{"line":48,"column":13},"end":{"line":50,"column":9}}],"line":48}},"s":{"0":1,"1":1,"2":1,"3":1,"4":4,"5":4,"6":1,"7":1,"8":74,"9":70,"10":4,"11":1,"12":48,"13":5,"14":43,"15":20,"16":0,"17":20,"18":20,"19":20,"20":20,"21":20,"22":47,"23":47,"24":28,"25":28,"26":19,"27":16,"28":20,"29":20,"30":20,"31":28,"32":28,"33":27,"34":1,"35":1,"36":20,"37":28},"f":{"0":1,"1":4,"2":74,"3":48,"4":20,"5":28},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[70,4],"4":[5,43],"5":[48,5],"6":[0,20],"7":[20,0],"8":[28,19],"9":[47,46],"10":[27,1],"11":[16,3],"12":[19,19,19],"13":[27,1],"14":[27,0],"15":[1,0]},"inputSourceMap":{"version":3,"file":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/element.ts","sources":["/home/cliid/workspace/personal/projects/smartquotes-ts/src/element.ts"],"names":[],"mappings":";;;;;AAEA,sDAA8B;AAM9B,SAAwB,OAAO,CAAC,IAAkC;IAChE,aAAa,CAAC,IAAI,CAAC,CAAC;IACpB,OAAO,IAAI,CAAC;AACd,CAAC;AAHD,0BAGC;AAED,MAAM,MAAM,GAAG,CAAC,IAAuB,EAAgB,EAAE;IACvD,IAAI,UAAU,IAAI,IAAI;QAAE,OAAO,IAAI,CAAC,QAAQ,KAAK,CAAC,CAAC;IAEnD,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,MAAM,UAAU,GAAG,CAAC,IAAuB,EAAoB,EAAE;IAC/D,IAAI,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,UAAU,IAAI,IAAI;QAC7C,OAAO,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC;IAEnC,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,SAAS,aAAa,CAAC,EAAgC;IACrD,IACE,CAAC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,OAAO,CACpD,EAAE,CAAC,QAAQ,CAAC,WAAW,EAAE,CAC1B,KAAK,CAAC,CAAC,EACR;QACA,OAAO;KACR;IAED,IAAI,IAAI,GAAG,EAAE,CAAC;IAEd,MAAM,UAAU,GAAG,YAAY,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;IAE3D,MAAM,SAAS,GAGT,EAAE,CAAC;IAET,iEAAiE;IACjE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAC1C,MAAM,IAAI,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAE3B,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,EAAE;YACpC,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;YACpD,IAAI,IAAI,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;SAC3D;aAAM,IACL,YAAY,IAAI,IAAI;YACpB,IAAI,CAAC,UAAU;YACf,IAAI,CAAC,UAAU,CAAC,MAAM,EACtB;YACA,IAAI,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC;SAC7B;KACF;IAED,IAAI,GAAG,IAAA,gBAAM,EAAC,IAAI,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC;IAE5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACzC,MAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACzB,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CACjC,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,SAAS,IAAI,EAAE,EAC7B,QAAQ,CAAC,MAAM,CAChB,CAAC;SACH;aAAM,IAAI,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACpC,QAAQ,CAAC,IAAI,CAAC,KAAK,GAAG,SAAS,CAC7B,IAAI,EACJ,QAAQ,CAAC,IAAI,CAAC,KAAK,EACnB,QAAQ,CAAC,MAAM,CAChB,CAAC;SACH;KACF;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,SAAS,CAAC,IAAY,EAAE,KAAa,EAAE,QAAgB;IAC9D,OAAO,IAAI;SACR,SAAS,CAAC,QAAQ,EAAE,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC;SAC5C,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC3B,CAAC","sourcesContent":["import { DefaultTreeAdapterMap } from \"parse5\";\n\nimport string from \"./string\";\n\ntype Document = DefaultTreeAdapterMap[\"document\"];\ntype Parse5Node = DefaultTreeAdapterMap[\"node\"];\ntype TextNode = DefaultTreeAdapterMap[\"textNode\"];\n\nexport default function element(root: Node | Parse5Node | Document) {\n  handleElement(root);\n  return root;\n}\n\nconst isText = (node: Node | Parse5Node): node is Text => {\n  if (\"nodeType\" in node) return node.nodeType === 3;\n\n  return false;\n};\n\nconst isTextNode = (node: Node | Parse5Node): node is TextNode => {\n  if (!(\"nodeType\" in node) && \"nodeName\" in node)\n    return node.nodeName === \"#text\";\n\n  return false;\n};\n\nfunction handleElement(el: Node | Parse5Node | Document) {\n  if (\n    [\"CODE\", \"PRE\", \"SCRIPT\", \"STYLE\", \"NOSCRIPT\"].indexOf(\n      el.nodeName.toUpperCase()\n    ) !== -1\n  ) {\n    return;\n  }\n\n  let text = \"\";\n\n  const childNodes = \"childNodes\" in el ? el.childNodes : [];\n\n  const textNodes: {\n    node: Text | TextNode;\n    length: number;\n  }[] = [];\n\n  // compile all text first so we handle working around child nodes\n  for (let i = 0; i < childNodes.length; i++) {\n    const node = childNodes[i];\n\n    if (isTextNode(node) || isText(node)) {\n      textNodes.push({ node: node, length: text.length });\n      text += \"nodeValue\" in node ? node.nodeValue : node.value;\n    } else if (\n      \"childNodes\" in node &&\n      node.childNodes &&\n      node.childNodes.length\n    ) {\n      text += handleElement(node);\n    }\n  }\n\n  text = string(text, { retainLength: true });\n\n  for (let i = 0; i < textNodes.length; i++) {\n    const nodeInfo = textNodes[i];\n    if (isText(nodeInfo.node)) {\n      nodeInfo.node.nodeValue = substring(\n        text,\n        nodeInfo.node.nodeValue || \"\",\n        nodeInfo.length\n      );\n    } else if (isTextNode(nodeInfo.node)) {\n      nodeInfo.node.value = substring(\n        text,\n        nodeInfo.node.value,\n        nodeInfo.length\n      );\n    }\n  }\n\n  return text;\n}\n\nfunction substring(text: string, value: string, position: number) {\n  return text\n    .substring(position, position + value.length)\n    .replace(\"\\u2063\", \"\");\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ef3cc7353bef299cb20aeef98a8bd66a52cfabf2","contentHash":"d37f9492ebed7d195c9b4ab4b5c79fb110fa25ba43f786ee1e75e362c68e8437"},"/home/cliid/workspace/personal/projects/smartquotes-ts/src/string.ts":{"path":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/string.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":23},"end":{"line":6,"column":65}},"4":{"start":{"line":7,"column":15},"end":{"line":15,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":13,"column":7}},"6":{"start":{"line":9,"column":28},"end":{"line":11,"column":24}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":51}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":15}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":15},"end":{"line":7,"column":16}},"loc":{"start":{"line":7,"column":59},"end":{"line":15,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":35},"end":{"line":8,"column":36}},"loc":{"start":{"line":8,"column":48},"end":{"line":13,"column":5}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":7,"column":21},"end":{"line":7,"column":54}},"type":"default-arg","locations":[{"start":{"line":7,"column":31},"end":{"line":7,"column":54}}],"line":7},"4":{"loc":{"start":{"line":9,"column":28},"end":{"line":11,"column":24}},"type":"cond-expr","locations":[{"start":{"line":10,"column":14},"end":{"line":10,"column":46}},{"start":{"line":11,"column":14},"end":{"line":11,"column":24}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":39,"6":468,"7":468,"8":39,"9":1},"f":{"0":1,"1":39,"2":468},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[19],"4":[78,390]},"inputSourceMap":{"version":3,"file":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/string.ts","sources":["/home/cliid/workspace/personal/projects/smartquotes-ts/src/string.ts"],"names":[],"mappings":";;;;;AAAA,kEAA0C;AAE1C,MAAM,MAAM,GAAG,CACb,GAAW,EACX,UAAqC,EAAE,YAAY,EAAE,KAAK,EAAE,EAC5D,EAAE;IACF,sBAAY,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;QAC/B,MAAM,WAAW,GACf,OAAO,OAAO,CAAC,CAAC,CAAC,KAAK,UAAU;YAC9B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC;YAClC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QACjB,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;IAEH,OAAO,GAAG,CAAC;AACb,CAAC,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import replacements from \"./replacements\";\n\nconst string = (\n  str: string,\n  options: { retainLength: boolean } = { retainLength: false }\n) => {\n  replacements.forEach((replace) => {\n    const replacement =\n      typeof replace[1] === \"function\"\n        ? replace[1](options.retainLength)\n        : replace[1];\n    str = str.replace(replace[0], replacement);\n  });\n\n  return str;\n};\n\nexport default string;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f2906fccee6845d2f857020c753edd60557f200c","contentHash":"b02afcb0b0b120fcd733b511ac2b1bdf6435d3d7db7ec8fa447634516e67e8bf"},"/home/cliid/workspace/personal/projects/smartquotes-ts/src/replacements.ts":{"path":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/replacements.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":11},"end":{"line":3,"column":77}},"2":{"start":{"line":4,"column":13},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":30}},"4":{"start":{"line":6,"column":21},"end":{"line":40,"column":1}},"5":{"start":{"line":10,"column":26},"end":{"line":10,"column":73}},"6":{"start":{"line":19,"column":30},"end":{"line":19,"column":71}},"7":{"start":{"line":41,"column":0},"end":{"line":41,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":8},"end":{"line":10,"column":9}},"loc":{"start":{"line":10,"column":26},"end":{"line":10,"column":73}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":12},"end":{"line":19,"column":13}},"loc":{"start":{"line":19,"column":30},"end":{"line":19,"column":71}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":38},"end":{"line":10,"column":72}},"type":"cond-expr","locations":[{"start":{"line":10,"column":53},"end":{"line":10,"column":67}},{"start":{"line":10,"column":70},"end":{"line":10,"column":72}}],"line":10},"1":{"loc":{"start":{"line":19,"column":42},"end":{"line":19,"column":70}},"type":"cond-expr","locations":[{"start":{"line":19,"column":57},"end":{"line":19,"column":65}},{"start":{"line":19,"column":68},"end":{"line":19,"column":70}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":39,"6":39,"7":1},"f":{"0":39,"1":39},"b":{"0":[20,19],"1":[20,19]},"inputSourceMap":{"version":3,"file":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/replacements.ts","sources":["/home/cliid/workspace/personal/projects/smartquotes-ts/src/replacements.ts"],"names":[],"mappings":";;AAAA,MAAM,EAAE,GAAG,kEAAkE,CAAC;AAC9E,MAAM,IAAI,GAAG,IAAI,EAAE,OAAO,CAAC;AAC3B,MAAM,OAAO,GAAG,KAAK,EAAE,OAAO,CAAC;AAE/B,MAAM,YAAY,GAGZ;IACJ,eAAe;IACf;QACE,MAAM;QACN,CAAC,YAAqB,EAAE,EAAE,CAAC,QAAQ,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;KAC3E;IACD,cAAc;IACd,CAAC,IAAI,MAAM,CAAC,IAAI,OAAO,QAAQ,IAAI,GAAG,EAAE,GAAG,CAAC,EAAE,YAAY,CAAC;IAC3D,WAAW;IACX,CAAC,2CAA2C,EAAE,YAAY,CAAC;IAC3D,6BAA6B;IAC7B,CAAC,YAAY,EAAE,UAAU,CAAC;IAC1B,oCAAoC;IACpC,CAAC,KAAK,EAAE,CAAC,YAAqB,EAAE,EAAE,CAAC,QAAQ,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC7E,cAAc;IACd,CAAC,IAAI,MAAM,CAAC,IAAI,OAAO,WAAW,EAAE,GAAG,CAAC,EAAE,YAAY,CAAC;IACvD,2BAA2B;IAC3B,CAAC,IAAI,MAAM,CAAC,IAAI,IAAI,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,YAAY,CAAC;IACvD,yBAAyB;IACzB;QACE,IAAI,MAAM,CACR,8DAA8D,EAAE,IAAI,EACpE,IAAI,CACL;QACD,YAAY;KACb;IACD,WAAW;IACX,CAAC,IAAI,MAAM,CAAC,oBAAoB,EAAE,eAAe,EAAE,IAAI,CAAC,EAAE,YAAY,CAAC;IACvE,uBAAuB;IACvB;QACE,IAAI,MAAM,CACR,yEAAyE,OAAO,2CAA2C,EAC3H,IAAI,CACL;QACD,UAAU;KACX;IACD,eAAe;IACf,CAAC,IAAI,EAAE,QAAQ,CAAC;IAChB,QAAQ;IACR,CAAC,IAAI,EAAE,QAAQ,CAAC;CACjB,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["const pL = \"a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ\";\nconst word = `[${pL}_0-9]`;\nconst nonWord = `[^${pL}_0-9]`;\n\nconst replacements: [\n  regexp: RegExp,\n  replace: ((retainLength: boolean) => string) | string\n][] = [\n  // triple prime\n  [\n    /'''/g,\n    (retainLength: boolean) => \"\\u2034\" + (retainLength ? \"\\u2063\\u2063\" : \"\"),\n  ],\n  // beginning \"\n  [new RegExp(`(${nonWord}|^)\"(${word})`, \"g\"), \"$1\\u201c$2\"],\n  // ending \"\n  [/(\\u201c[^\"]*)\"([^\"]*$|[^\\u201c\"]*\\u201c)/g, \"$1\\u201d$2\"],\n  // remaining \" at end of word\n  [/([^0-9])\"/g, \"$1\\u201d\"],\n  // double prime as two single quotes\n  [/''/g, (retainLength: boolean) => \"\\u2033\" + (retainLength ? \"\\u2063\" : \"\")],\n  // beginning '\n  [new RegExp(`(${nonWord}|^)'(\\\\S)`, \"g\"), \"$1\\u2018$2\"],\n  // conjunction's possession\n  [new RegExp(`(${word})'([${pL}])`, \"ig\"), \"$1\\u2019$2\"],\n  // abbrev. years like '93\n  [\n    new RegExp(\n      `(\\\\u2018)([0-9]{2}[^\\\\u2019]*)(\\\\u2018([^0-9]|$)|$|\\\\u2019[${pL}])`,\n      \"ig\"\n    ),\n    \"\\u2019$2$3\",\n  ],\n  // ending '\n  [new RegExp(`((\\\\u2018[^']*)|[${pL}])'([^0-9]|$)`, \"ig\"), \"$1\\u2019$3\"],\n  // backwards apostrophe\n  [\n    new RegExp(\n      `(\\\\B|^)\\\\u2018(?=([^\\\\u2018\\\\u2019]*\\\\u2019\\\\b)*([^\\\\u2018\\\\u2019]*\\\\B${nonWord}[\\\\u2018\\\\u2019]\\\\b|[^\\\\u2018\\\\u2019]*$))`,\n      \"ig\"\n    ),\n    \"$1\\u2019\",\n  ],\n  // double prime\n  [/\"/g, \"\\u2033\"],\n  // prime\n  [/'/g, \"\\u2032\"],\n];\n\nexport default replacements;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e116cb95d48f07dcc08a9d235a584bbdf6435153","contentHash":"7e3a91e636de3f9c73f20394b25d27453ff2732169d2f13c05fad46ff609c889"},"/home/cliid/workspace/personal/projects/smartquotes-ts/src/listen.ts":{"path":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/listen.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":55}},"4":{"start":{"line":8,"column":21},"end":{"line":14,"column":6}},"5":{"start":{"line":9,"column":8},"end":{"line":13,"column":11}},"6":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":45}},"8":{"start":{"line":15,"column":4},"end":{"line":20,"column":7}},"9":{"start":{"line":16,"column":8},"end":{"line":19,"column":11}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"11":{"start":{"line":23,"column":0},"end":{"line":40,"column":2}},"12":{"start":{"line":25,"column":4},"end":{"line":39,"column":5}},"13":{"start":{"line":27,"column":8},"end":{"line":27,"column":14}},"14":{"start":{"line":29,"column":9},"end":{"line":39,"column":5}},"15":{"start":{"line":30,"column":8},"end":{"line":30,"column":66}},"16":{"start":{"line":33,"column":40},"end":{"line":38,"column":14}},"17":{"start":{"line":34,"column":12},"end":{"line":37,"column":13}},"18":{"start":{"line":35,"column":16},"end":{"line":35,"column":55}},"19":{"start":{"line":36,"column":16},"end":{"line":36,"column":22}},"20":{"start":{"line":41,"column":0},"end":{"line":41,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"listen","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":15}},"loc":{"start":{"line":7,"column":22},"end":{"line":22,"column":1}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":42},"end":{"line":8,"column":43}},"loc":{"start":{"line":8,"column":57},"end":{"line":14,"column":5}},"line":8},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":26},"end":{"line":9,"column":27}},"loc":{"start":{"line":9,"column":40},"end":{"line":13,"column":9}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":22},"end":{"line":15,"column":23}},"loc":{"start":{"line":15,"column":28},"end":{"line":20,"column":5}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":23,"column":20},"end":{"line":23,"column":21}},"loc":{"start":{"line":23,"column":29},"end":{"line":40,"column":1}},"line":23},"6":{"name":"(anonymous_6)","decl":{"start":{"line":33,"column":52},"end":{"line":33,"column":53}},"loc":{"start":{"line":33,"column":58},"end":{"line":38,"column":9}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":16,"column":25},"end":{"line":16,"column":46}},"type":"binary-expr","locations":[{"start":{"line":16,"column":25},"end":{"line":16,"column":29}},{"start":{"line":16,"column":33},"end":{"line":16,"column":46}}],"line":16},"4":{"loc":{"start":{"line":25,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":39,"column":5}},{"start":{"line":25,"column":4},"end":{"line":39,"column":5}}],"line":25},"5":{"loc":{"start":{"line":29,"column":9},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":29,"column":9},"end":{"line":39,"column":5}},{"start":{"line":29,"column":9},"end":{"line":39,"column":5}}],"line":29},"6":{"loc":{"start":{"line":34,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":34,"column":12},"end":{"line":37,"column":13}},{"start":{"line":34,"column":12},"end":{"line":37,"column":13}}],"line":34}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[1,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/home/cliid/workspace/personal/projects/smartquotes-ts/src/listen.ts","sources":["/home/cliid/workspace/personal/projects/smartquotes-ts/src/listen.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,SAAS,MAAM,CAAC,IAAkB;IAChC,MAAM,QAAQ,GAAG,IAAI,gBAAgB,CAAC,CAAC,SAAS,EAAE,EAAE;QAClD,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;YAC7B,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,UAAU,EAAE;gBACtC,IAAA,iBAAO,EAAC,IAAI,CAAC,CAAC;aACf;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;QACrB,QAAQ,CAAC,OAAO,CAAC,IAAI,IAAI,QAAQ,CAAC,IAAI,EAAE;YACtC,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,IAAI;SACd,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,CAAC,UAAU,GAAG,CAAC,GAAe,EAAE,EAAE;IACtC,oFAAoF;IACpF,IAAI,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;QACrC,sBAAsB;QACtB,GAAG,EAAE,CAAC;KACP;SAAM,IAAI,QAAQ,CAAC,gBAAgB,EAAE;QACpC,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;KAC3D;SAAM;QACL,MAAM,uBAAuB,GAAG,WAAW,CAAC,GAAG,EAAE;YAC/C,IAAI,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;gBACrC,aAAa,CAAC,uBAAuB,CAAC,CAAC;gBACvC,GAAG,EAAE,CAAC;aACP;QACH,CAAC,EAAE,EAAE,CAAC,CAAC;KACR;AACH,CAAC,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["import element from \"./element\";\n\nfunction listen(root?: HTMLElement) {\n  const observer = new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      for (const node of mutation.addedNodes) {\n        element(node);\n      }\n    });\n  });\n\n  listen.runOnReady(() => {\n    observer.observe(root || document.body, {\n      childList: true,\n      subtree: true,\n    });\n  });\n  return observer;\n}\n\nlisten.runOnReady = (run: () => void) => {\n  // if called without arguments, run on the entire body after the document has loaded\n  if (document.readyState !== \"loading\") {\n    // we're already ready\n    run();\n  } else if (document.addEventListener) {\n    document.addEventListener(\"DOMContentLoaded\", run, false);\n  } else {\n    const readyStateCheckInterval = setInterval(() => {\n      if (document.readyState !== \"loading\") {\n        clearInterval(readyStateCheckInterval);\n        run();\n      }\n    }, 10);\n  }\n};\n\nexport default listen;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"649e5a823782b52ac2796d26906c56099369209c","contentHash":"40666bcf83794f70ca2502613879b6a3ffe73786a7132da3c913923eb4727fff"}}