!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).smartquotes={})}(this,function(e){"use strict";function d(t,o){return void 0===o&&(o={retainLength:!1}),r.forEach(function(e){var n="function"==typeof e[1]?e[1](o.retainLength):e[1];t=t.replace(e[0],n)}),t}var n="a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ",t="[".concat(n,"_0-9]"),o="[^".concat(n,"_0-9]"),r=[[/'''/g,function(e){return"‴"+(e?"⁣⁣":"")}],[new RegExp("(".concat(o,'|^)"(').concat(t,")"),"g"),"$1“$2"],[/(\u201c[^"]*)"([^"]*$|[^\u201c"]*\u201c)/g,"$1”$2"],[/([^0-9])"/g,"$1”"],[/''/g,function(e){return"″"+(e?"⁣":"")}],[new RegExp("(".concat(o,"|^)'(\\S)"),"g"),"$1‘$2"],[new RegExp("(".concat(t,")'([").concat(n,"])"),"ig"),"$1’$2"],[new RegExp("(\\u2018)([0-9]{2}[^\\u2019]*)(\\u2018([^0-9]|$)|$|\\u2019[".concat(n,"])"),"ig"),"’$2$3"],[new RegExp("((\\u2018[^']*)|[".concat(n,"])'([^0-9]|$)"),"ig"),"$1’$3"],[new RegExp("(\\B|^)\\u2018(?=([^\\u2018\\u2019]*\\u2019\\b)*([^\\u2018\\u2019]*\\B".concat(o,"[\\u2018\\u2019]\\b|[^\\u2018\\u2019]*$))"),"ig"),"$1’"],[/"/g,"″"],[/'/g,"′"]];function u(e){return function e(n){if(-1!==["CODE","PRE","SCRIPT","STYLE","NOSCRIPT"].indexOf(n.nodeName.toUpperCase()))return;var t="";var o="childNodes"in n?n.childNodes:[];var r=[];for(var u=0;u<o.length;u++){var i=o[u];l(i)||c(i)?(r.push({node:i,length:t.length}),t+="nodeValue"in i?i.nodeValue:i.value):"childNodes"in i&&i.childNodes&&i.childNodes.length&&(t+=e(i))}t=d(t,{retainLength:!0});for(u=0;u<r.length;u++){var a=r[u];c(a.node)?a.node.nodeValue=f(t,a.node.nodeValue||"",a.length):l(a.node)&&(a.node.value=f(t,a.node.value,a.length))}return t}(e),e}function c(e){return"nodeType"in e&&3===e.nodeType}function l(e){return!("nodeType"in e)&&"nodeName"in e&&"#text"===e.nodeName}function f(e,n,t){return e.substring(t,t+n.length).replace("⁣","")}var i=function(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};function a(e){var n=new MutationObserver(function(e){e.forEach(function(e){var n,t;try{for(var o=i(e.addedNodes),r=o.next();!r.done;r=o.next())u(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(n)throw n.error}}})});return a.runOnReady(function(){n.observe(e||document.body,{childList:!0,subtree:!0})}),n}function g(e){return"undefined"!=typeof document&&void 0===e?(a.runOnReady(function(){return u(document.body)}),g):"string"==typeof e?d(e):e?u(e):void 0}a.runOnReady=function(e){var n;"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):n=setInterval(function(){"loading"!==document.readyState&&(clearInterval(n),e())},10)},g.element=u,g.listen=a,g.replacements=r,g.string=d,e.default=g,e.element=u,e.listen=a,e.replacements=r,e.string=d,Object.defineProperty(e,"__esModule",{value:!0})});