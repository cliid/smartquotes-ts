{"version":3,"file":"smartquotes.js","sources":["../esm/replacements.js","../esm/string.js","../esm/element.js","../esm/listen.js","../esm/index.js"],"sourcesContent":["var pL = \"a-zA-ZáàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ\";\nvar word = \"[\".concat(pL, \"_0-9]\");\nvar nonWord = \"[^\".concat(pL, \"_0-9]\");\nvar replacements = [\n    // triple prime\n    [\n        /'''/g,\n        function (retainLength) { return \"\\u2034\" + (retainLength ? \"\\u2063\\u2063\" : \"\"); },\n    ],\n    // beginning \"\n    [new RegExp(\"(\".concat(nonWord, \"|^)\\\"(\").concat(word, \")\"), \"g\"), \"$1\\u201c$2\"],\n    // ending \"\n    [/(\\u201c[^\"]*)\"([^\"]*$|[^\\u201c\"]*\\u201c)/g, \"$1\\u201d$2\"],\n    // remaining \" at end of word\n    [/([^0-9])\"/g, \"$1\\u201d\"],\n    // double prime as two single quotes\n    [/''/g, function (retainLength) { return \"\\u2033\" + (retainLength ? \"\\u2063\" : \"\"); }],\n    // beginning '\n    [new RegExp(\"(\".concat(nonWord, \"|^)'(\\\\S)\"), \"g\"), \"$1\\u2018$2\"],\n    // conjunction's possession\n    [new RegExp(\"(\".concat(word, \")'([\").concat(pL, \"])\"), \"ig\"), \"$1\\u2019$2\"],\n    // abbrev. years like '93\n    [\n        new RegExp(\"(\\\\u2018)([0-9]{2}[^\\\\u2019]*)(\\\\u2018([^0-9]|$)|$|\\\\u2019[\".concat(pL, \"])\"), \"ig\"),\n        \"\\u2019$2$3\",\n    ],\n    // ending '\n    [new RegExp(\"((\\\\u2018[^']*)|[\".concat(pL, \"])'([^0-9]|$)\"), \"ig\"), \"$1\\u2019$3\"],\n    // backwards apostrophe\n    [\n        new RegExp(\"(\\\\B|^)\\\\u2018(?=([^\\\\u2018\\\\u2019]*\\\\u2019\\\\b)*([^\\\\u2018\\\\u2019]*\\\\B\".concat(nonWord, \"[\\\\u2018\\\\u2019]\\\\b|[^\\\\u2018\\\\u2019]*$))\"), \"ig\"),\n        \"$1\\u2019\",\n    ],\n    // double prime\n    [/\"/g, \"\\u2033\"],\n    // prime\n    [/'/g, \"\\u2032\"],\n];\nexport default replacements;\n","import replacements from \"./replacements\";\nvar string = function (str, options) {\n    if (options === void 0) { options = { retainLength: false }; }\n    replacements.forEach(function (replace) {\n        var replacement = typeof replace[1] === \"function\"\n            ? replace[1](options.retainLength)\n            : replace[1];\n        str = str.replace(replace[0], replacement);\n    });\n    return str;\n};\nexport default string;\n","import string from \"./string\";\nexport default function element(root) {\n    handleElement(root);\n    return root;\n}\nvar isText = function (node) {\n    if (\"nodeType\" in node)\n        return node.nodeType === 3;\n    return false;\n};\nvar isTextNode = function (node) {\n    if (!(\"nodeType\" in node) && \"nodeName\" in node)\n        return node.nodeName === \"#text\";\n    return false;\n};\nfunction handleElement(el) {\n    if ([\"CODE\", \"PRE\", \"SCRIPT\", \"STYLE\", \"NOSCRIPT\"].indexOf(el.nodeName.toUpperCase()) !== -1) {\n        return;\n    }\n    var text = \"\";\n    var childNodes = \"childNodes\" in el ? el.childNodes : [];\n    var textNodes = [];\n    // compile all text first so we handle working around child nodes\n    for (var i = 0; i < childNodes.length; i++) {\n        var node = childNodes[i];\n        if (isTextNode(node) || isText(node)) {\n            textNodes.push({ node: node, length: text.length });\n            text += \"nodeValue\" in node ? node.nodeValue : node.value;\n        }\n        else if (\"childNodes\" in node &&\n            node.childNodes &&\n            node.childNodes.length) {\n            text += handleElement(node);\n        }\n    }\n    text = string(text, { retainLength: true });\n    for (var i = 0; i < textNodes.length; i++) {\n        var nodeInfo = textNodes[i];\n        if (isText(nodeInfo.node)) {\n            nodeInfo.node.nodeValue = substring(text, nodeInfo.node.nodeValue || \"\", nodeInfo.length);\n        }\n        else if (isTextNode(nodeInfo.node)) {\n            nodeInfo.node.value = substring(text, nodeInfo.node.value, nodeInfo.length);\n        }\n    }\n    return text;\n}\nfunction substring(text, value, position) {\n    return text\n        .substring(position, position + value.length)\n        .replace(\"\\u2063\", \"\");\n}\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport element from \"./element\";\nfunction listen(root) {\n    var observer = new MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n            var e_1, _a;\n            try {\n                for (var _b = __values(mutation.addedNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var node = _c.value;\n                    element(node);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    });\n    listen.runOnReady(function () {\n        observer.observe(root || document.body, {\n            childList: true,\n            subtree: true,\n        });\n    });\n    return observer;\n}\nlisten.runOnReady = function (run) {\n    // if called without arguments, run on the entire body after the document has loaded\n    if (document.readyState !== \"loading\") {\n        // we're already ready\n        run();\n    }\n    else if (document.addEventListener) {\n        document.addEventListener(\"DOMContentLoaded\", run, false);\n    }\n    else {\n        var readyStateCheckInterval_1 = setInterval(function () {\n            if (document.readyState !== \"loading\") {\n                clearInterval(readyStateCheckInterval_1);\n                run();\n            }\n        }, 10);\n    }\n};\nexport default listen;\n","import element from \"./element\";\nimport listen from \"./listen\";\nimport replacements from \"./replacements\";\nimport string from \"./string\";\n// The smartquotes function should just delegate to the other functions\nfunction smartquotes(context) {\n    if (typeof document !== \"undefined\" && typeof context === \"undefined\") {\n        listen.runOnReady(function () { return element(document.body); });\n        return smartquotes;\n    }\n    else if (typeof context === \"string\") {\n        return string(context);\n    }\n    else if (context) {\n        return element(context);\n    }\n}\nsmartquotes.element = element;\nsmartquotes.listen = listen;\nsmartquotes.replacements = replacements;\nsmartquotes.string = string;\nexport default smartquotes;\nexport { element, listen, replacements, string };\n"],"names":["this"],"mappings":"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"}